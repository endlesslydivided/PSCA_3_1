{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":";;AAQA,eAAuB,KAAa;IAClC,IAAM,GAAG,GAAa,EAAE,CAAA;IACxB,IAAM,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;IAExD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;QACtC,IAAM,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,CAAA;QACvB,IAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA;QACnC,IAAM,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,IAAI,EAAE,CAAA;QAC7C,IAAM,OAAK,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAA;QAE/C,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,OAAK,CAAC,CAAA;IACvB,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;AACnB,CAAC;AAdD,sBAcC;AAED,cAAsB,QAAa;IACjC,EAAE,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;QACxB,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAA;IACnC,CAAC;IAED,IAAM,OAAO,GAAY,EAAE,CAAA;IAE3B,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,UAAU,GAAG;QACjD,IAAM,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA;QAInC,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACvB,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAA;QACzB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,CAAA;QACtB,CAAC;IACH,CAAC,CAAC,CAAA;IAEF,MAAM,CAAC,OAAO,CAAA;AAChB,CAAC;AApBD,oBAoBC;AAED,eAAuB,MAAgB;IACrC,IAAM,MAAM,GAAS,EAAE,CAAA;IACvB,IAAM,OAAO,GAAY,EAAE,CAAA;IAE3B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC;QAC7C,IAAM,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC,CAAA;QACtB,IAAM,KAAK,GAAG,IAAI,CAAC,WAAW,EAAE,CAAA;QAChC,IAAM,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CAAA;QAC7B,IAAM,KAAK,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;QAE3B,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YACrC,OAAO,CAAC,IAAI,CAAC,GAAG,KAAK,CAAA;QACvB,CAAC;QAAC,IAAI,CAAC,CAAC;YAEN,EAAE,CAAC,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC;gBACrB,OAAO,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,CAAA;gBAChC,OAAO,OAAO,CAAC,OAAO,CAAC,CAAA;YACzB,CAAC;YAED,EAAE,CAAC,CAAC,OAAO,OAAO,CAAC,IAAI,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC;gBACtC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAW,EAAE,KAAK,CAAC,CAAA;YAClD,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,OAAO,CAAC,IAAI,CAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;YACzC,CAAC;QACH,CAAC;QAED,MAAM,CAAC,KAAK,CAAC,GAAG,IAAI,CAAA;IACtB,CAAC;IAED,MAAM,CAAC,OAAO,CAAA;AAChB,CAAC;AA9BD,sBA8BC","sourcesContent":["export interface Headers {\n  [headerName: string]: string | string[]\n}\n\ninterface Case {\n  [key: string]: string\n}\n\nexport function parse (value: string): Headers {\n  const arr: string[] = []\n  const lines = value.replace(/\\r?\\n$/, '').split(/\\r?\\n/)\n\n  for (let i = 0; i < lines.length; i++) {\n    const header = lines[i]\n    const indexOf = header.indexOf(':')\n    const name = header.substr(0, indexOf).trim()\n    const value = header.substr(indexOf + 1).trim()\n\n    arr.push(name, value)\n  }\n\n  return array(arr)\n}\n\nexport function http (response: any): Headers {\n  if (response.rawHeaders) {\n    return array(response.rawHeaders)\n  }\n\n  const headers: Headers = {}\n\n  Object.keys(response.headers).forEach(function (key) {\n    const value = response.headers[key]\n\n    // Need to normalize `Set-Cookie` header under node 0.10 which is\n    // always set as an array.\n    if (value.length === 1) {\n      headers[key] = value[0]\n    } else {\n      headers[key] = value\n    }\n  })\n\n  return headers\n}\n\nexport function array (values: string[]) {\n  const casing: Case = {}\n  const headers: Headers = {}\n\n  for (let i = 0; i < values.length; i = i + 2) {\n    const name = values[i]\n    const lower = name.toLowerCase()\n    const oldName = casing[lower]\n    const value = values[i + 1]\n\n    if (!headers.hasOwnProperty(oldName)) {\n      headers[name] = value\n    } else {\n      // Move the header property when the name case changes.\n      if (name !== oldName) {\n        headers[name] = headers[oldName]\n        delete headers[oldName]\n      }\n\n      if (typeof headers[name] === 'string') {\n        headers[name] = [headers[name] as string, value]\n      } else {\n        (headers[name] as string[]).push(value)\n      }\n    }\n\n    casing[lower] = name\n  }\n\n  return headers\n}\n"]}